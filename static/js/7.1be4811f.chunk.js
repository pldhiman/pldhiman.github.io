(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{869:function(e,t,a){"use strict";var l=a(0),n=a.n(l);t.a=function(e){var t=e.size,a=e.url,l=e.overlay;return n.a.createElement("div",{className:"avatar",style:{height:t,width:t}},!l&&n.a.createElement("div",{className:"avatar__overlay"}),!l&&n.a.createElement("div",{className:"avatar__text"},"Change Profile"),n.a.createElement("img",{src:a,alt:"img",className:"avatar__img"}))}},905:function(e,t,a){"use strict";a.r(t);var l,n=a(28),r=a(13),s=a(14),o=a(16),i=a(15),c=a(17),u=a(0),m=a.n(u),d=a(33),p=a(869),f=a(9),g=a(45),b=(a(872),a(7)),h=a(154),v=a(224),C=a(873),y=a.n(C),E=(a(875),function(e){function t(){var e,a;Object(r.a)(this,t);for(var l=arguments.length,n=new Array(l),s=0;s<l;s++)n[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(n)))).state={src:null,croppedImageUrl:""},a.uploadImage=function(e){var t=Object(b.d)(),l=t.email,n=t.apiKey,r=t.appName,s=t.version,o=new FormData;o.append("image",e),o.append("email",l),o.append("version",s),o.append("appName",r),o.append("platform","android"),o.append("apiKey",n),a.setState({status:"Please wait..",page:0}),fetch(h.b,{method:"post",body:o}).then(function(e){return e.json()}).then(function(e){e&&(a.setState({imageUrl:e.url,status:"Success"}),Object(b.a)("image",e.url),window.location.reload())}).catch(function(e){a.setState({status:"Please Try Again Later"})})},a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"_crop",value:function(){l=this.refs.cropper.getCroppedCanvas().toDataURL()}},{key:"render",value:function(){var e=this,t=this.state.status,a=this.props,n=a.imageSrc,r=a.onClickCancel;return m.a.createElement("div",{style:{padding:"2rem",width:"100%",display:"flex",justifyContent:"center",flexFlow:"column",alignItems:"center"}},m.a.createElement(y.a,{ref:"cropper",src:n,style:{height:"70vh",width:"70vw"},aspectRatio:1,guides:!0,crop:this._crop.bind(this)}),t&&m.a.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",backgroundColor:"rgba(0,0,0,.6)",padding:".5rem",borderRadius:"4px"}},m.a.createElement(v.a,{type:"simple"})),"success"===t&&m.a.createElement("div",null,"Success"),!t&&m.a.createElement("div",{className:"display-flex margin-top-sm"},m.a.createElement("p",{className:"btn-1 bg-green color-white",style:{padding:"10px"},onClick:function(){return e.uploadImage(l)}},"Upload"),m.a.createElement("p",{className:"btn-1 bg-red color-white",style:{padding:"10px"},onClick:function(){return r("home")}},"Cancel")))}}]),t}(u.Component)),I=a(255),_=a(103),N=function(e){function t(){var e,a;Object(r.a)(this,t);for(var l=arguments.length,s=new Array(l),c=0;c<l;c++)s[c]=arguments[c];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).state={userInfo:{},userStudyDetails:[],page:"home",src:null,showUpdateButton:!1},a.initialFetch=function(){Object(f.a)("getUserProfile").then(function(e){e&&(a.setState({userInfoIDs:e.userInfoIDs,imageUrl:e.userInfo[0].image,userInfo:e.userInfo[0],userStudyDetails:e.userStudyDetails,showUpdateButton:!1}),Object(_.a)("text"))})},a.onSelectFile=function(e){if(e.target.files&&e.target.files.length>0)if("image/jpeg"===e.target.files[0].type||"image/png"===e.target.files[0].type)if(e.target.files[0].size/1e3/1e3>=5)a.setState({status:"Image size must be less than 5 MB"});else{var t=new FileReader;t.addEventListener("load",function(){return a.setState({src:t.result,page:"imageEdit"})}),t.readAsDataURL(e.target.files[0])}else a.setState({status:"Please Select JPEG/PNG File"})},a.changePage=function(e){a.setState({page:e})},a.onChangeTextField=function(e){var t;a.setState((t={},Object(n.a)(t,e.target.name,e.target.value),Object(n.a)(t,"showUpdateButton",!0),Object(n.a)(t,"status",""),t))},a.onClickTextField=function(e){"Phone"===e.target.name?(a.changePage("profileEdit"),a.setState({pageNumber:4})):"Course"===e.target.name?(a.changePage("profileEdit"),a.setState({pageNumber:1})):"College"!==e.target.name&&"Year"!==e.target.name||(a.changePage("profileEdit"),a.setState({pageNumber:3}))},a.userCountryCollegeOfUser=function(e){var t=e.courseId,l=e.selectedCollegeInfo,n=e.selectedYearInfo,r=e.courses,s=e.graduationCollege;a.setState({userInfoForEdit:e,Course:r.filter(function(e){return e.id===t})[0].course,College:s||l.label,Year:n.label,showUpdateButton:!0})},a.updateUserInfo=function(e){var t=a.state.Name;if(e){var l=e.courseId,n=e.selectedCountryOrState,r=e.selectedCollegeInfo,s=e.isIndia,o=e.selectedYearInfo,i=e.graduationCollege;l&&n&&n.value&&o&&o.value&&a.updateUserApi(l,s,n.value,i&&i.length?479:r.value,o.value,i)}else if(t&&t.length&&t.trim()){var c=a.state.userInfoIDs,u=c.collegeID,m=c.courseID,d=c.isIndia,p=c.refID,f=c.yearInfoID;a.updateUserApi(m,d,p,u,f,null,t.trim())}else a.setState({status:"Please Enter Name"})},a.updateUserApi=function(e,t,l,n,r){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;Object(f.a)("updateCountryCollegeOfUser",{courseID:e,isIndia:t,refID:l,collegeID:n,studyYear:r,addNewClg:s,name:o}).then(function(t){t.status&&Object(f.a)("updateUserCourse",{courseID:e}).then(function(t){t.status?(Object(b.a)("courseID",e),a.initialFetch(),a.setState({status:"Success"}),setTimeout(function(){a.setState({status:""}),window.location.reload()},1e3)):a.setState({status:"Please Try Again Later"})})})},a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.initialFetch()}},{key:"render",value:function(){var e=this,t=this.state,l=t.userInfo,n=t.userStudyDetails,r=t.page,s=t.status,o=t.src,i=t.pageNumber,c=t.userInfoIDs,u=t.userInfoForEdit,f=t.showUpdateButton;return m.a.createElement(d.a,{backBtn:!0,footer:!0,pageHeading:"Profile",breadCrumb:Object(g.a)(this.props.location),modal:"imageEdit"===r?m.a.createElement(E,{imageSrc:o,onClickCancel:this.changePage}):"profileEdit"===r?m.a.createElement(I.a,{pageNumber:i,from:"editProfile",userCountryCollegeOfUser:this.userCountryCollegeOfUser,changePage:this.changePage,userInfoIDs:c}):null},m.a.createElement("div",{className:"section-main"},m.a.createElement("div",{className:"profile"},m.a.createElement("div",{className:"profile__left"},m.a.createElement("label",{htmlFor:"image"},m.a.createElement(p.a,{size:"15rem",url:l.image})),m.a.createElement("input",{type:"file",name:"image",style:{display:"none"},id:"image",onChange:this.onSelectFile,onClick:this.onSelectFile})),m.a.createElement("p",{style:{textAlign:"center",color:"Success"===s?"green":"red",fontSize:"1.6rem",paddingTop:"1rem"}},s),m.a.createElement("div",{className:"profile__right"},f&&m.a.createElement("button",{className:"btn-2 bg-prep-blue btn-txt-color-white form__btn profile__right-update",onClick:function(){return e.updateUserInfo(u)}},"UPDATE profile"),m.a.createElement("form",{className:"form"},n&&Array.isArray(n)&&n.length?n.map(function(t,l){return m.a.createElement("div",{key:l,className:"form__field",id:"form__nameforsignup"},m.a.createElement("label",{htmlFor:t.label,className:"form__label"},t.label),m.a.createElement("div",{className:"form__input--container"},m.a.createElement("input",{type:"text",name:t.label,id:t.label,autoComplete:t.label,placeholder:t.label,value:void 0!==e.state[t.label]?e.state[t.label]:t.value,onChange:e.onChangeTextField,readOnly:"Name"!==t.label&&"readonly",onClick:e.onClickTextField,className:"Name"===t.label?"form__input form__input--active":"form__input",style:{cursor:"Name"!==t.label&&("Phone"===t.label||"Course"===t.label||"College"===t.label||"Year"===t.label?"pointer":"default"),color:"Email"===t.label||"Doubts Left"===t.label?"var(--subheading-color)":"var(--heading-color)"}}),"Phone"===t.label||"Course"===t.label||"College"===t.label||"Year"===t.label||"Name"===t.label?m.a.createElement("label",{htmlFor:t.label,className:"form__input--icon",onClick:e.onClickTextField},m.a.createElement("img",{src:a(335),alt:"edit icon"})):null))}):null),m.a.createElement("div",{className:"form__btns"},f&&m.a.createElement("button",{className:"btn-2 bg-prep-blue btn-txt-color-white form__btn",onClick:function(){return e.updateUserInfo(u)}},"Update profile"))))))}}]),t}(u.Component);t.default=N}}]);